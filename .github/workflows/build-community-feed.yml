name: Build Community Events Feed
on:
  workflow_dispatch:

permissions:
  contents: write
  issues: read

jobs:
  build-feed:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Build community-events.json (placeholder)
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');
            // Minimal test content to verify the workflow runs
            fs.writeFileSync('community-events.json', JSON.stringify([], null, 2) + '\n', 'utf8');
            core.info('Wrote placeholder community-events.json');

      - name: Commit feed if changed
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "chore(feed): update community-events.json [skip ci]"
          file_pattern: community-events.json
